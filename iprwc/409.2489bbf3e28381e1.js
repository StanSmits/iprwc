"use strict";(self.webpackChunkiQuestion=self.webpackChunkiQuestion||[]).push([[409],{2409:(S,_,i)=>{i.r(_),i.d(_,{StoreModule:()=>c});var y=i(4466),a=i(3599),t=i(4650),C=i(6412),b=i(3719),x=i(970),I=i(529),v=i(4310),f=i(6895);function T(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"li",2)(1,"div",3)(2,"div",4)(3,"h5",5),t._uU(4),t.qZA(),t.TgZ(5,"h6",6),t._uU(6),t.qZA(),t.TgZ(7,"p",7),t._uU(8),t.qZA(),t.TgZ(9,"a",8),t._uU(10,"Bekijk product"),t.qZA(),t.TgZ(11,"a",9),t.NdJ("click",function(){const h=t.CHM(o).$implicit,Z=t.oxw();return t.KtG(Z.addToCart(h))}),t._uU(12,"Toevoegen aan kar"),t.qZA()()()()}if(2&n){const o=e.$implicit;t.xp6(4),t.Oqu(o.name),t.xp6(2),t.Oqu(o.description),t.xp6(2),t.hij("\u20ac ",o.price,""),t.xp6(1),t.s9C("routerLink",o.id)}}class p{constructor(e,o){this.http=e,this.toastService=o,this.cart=JSON.parse(localStorage.getItem("cart")||"[]")}ngOnInit(){this.http.get("/item/all").subscribe(e=>{this.items=e})}addToCart(e){this.cart.push(e),localStorage.setItem("cart",JSON.stringify(this.cart)),this.toastService.show("Item toegevoegd aan winkelwagen!",{classname:"bg-info text-light",delay:3e3}),console.log(this.cart)}}p.\u0275fac=function(e){return new(e||p)(t.Y36(I.eN),t.Y36(v.k))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-items"]],decls:3,vars:1,consts:[[1,"flex","flex-row","gap-4","list-group"],["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"card-link","btn","btn-primary",3,"routerLink"],[1,"card-link","btn","btn-success",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"router-outlet"),t.TgZ(1,"ul",0),t.YNc(2,T,13,4,"li",1),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",o.items))},dependencies:[a.lC,a.rH,f.sg]});class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-store"]],decls:8,vars:0,consts:[[1,"container","mt-4"]],template:function(e,o){1&e&&(t._UZ(0,"router-outlet")(1,"app-navigation")(2,"app-toasts"),t.TgZ(3,"div",0)(4,"h1"),t._uU(5,"Shop"),t.qZA(),t._UZ(6,"app-items"),t.qZA(),t._UZ(7,"app-footer"))},dependencies:[a.lC,C.y,b.J,x.c,p]});class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-item"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"item works!"),t.qZA())}});var r=i(433);function A(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"li",46)(1,"div")(2,"h6",47),t._uU(3),t.qZA()(),t.TgZ(4,"span",32),t._uU(5),t.TgZ(6,"span",48),t.NdJ("click",function(){const h=t.CHM(o).$implicit,Z=t.oxw(2);return t.KtG(Z.removeItemFromCart(h))}),t._UZ(7,"i",49),t.qZA()()()}if(2&n){const o=e.$implicit;t.xp6(3),t.Oqu(o.name),t.xp6(2),t.hij("\u20ac ",o.price," ")}}function U(n,e){if(1&n&&(t.TgZ(0,"li",50)(1,"div",51)(2,"h6",47),t._uU(3),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.qZA()(),t.TgZ(6,"span",51),t._uU(7),t.qZA()()),2&n){const o=t.oxw(2);t.xp6(3),t.Oqu(o.promoCode.code),t.xp6(2),t.Oqu(o.promoCode.description),t.xp6(2),t.hij("",o.promoCode.discount," % korting")}}function q(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"main")(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"h2"),t._uU(4,"Winkel Kar"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"h4",6)(8,"span",7),t._uU(9,"In jou kar"),t.qZA(),t.TgZ(10,"span",8),t._uU(11),t.qZA()(),t.TgZ(12,"ul",9),t.YNc(13,A,8,2,"li",10),t.YNc(14,U,8,3,"li",11),t.TgZ(15,"li",12)(16,"span"),t._uU(17,"Totaal (EUR)"),t.qZA(),t.TgZ(18,"strong"),t._uU(19),t.qZA()()(),t.TgZ(20,"form",13),t.NdJ("submit",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.onPromoCodeSubmit())}),t.TgZ(21,"div",14),t._UZ(22,"input",15),t.TgZ(23,"button",16),t._uU(24," Verzilveren "),t.qZA()()()(),t.TgZ(25,"div",17)(26,"h4",18),t._uU(27,"Verzend & factuur adres"),t.qZA(),t.TgZ(28,"form",19),t.NdJ("submit",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.onSubmit())}),t.TgZ(29,"div",20)(30,"div",21)(31,"label",22),t._uU(32,"Voornaam"),t.qZA(),t._UZ(33,"input",23),t.qZA(),t.TgZ(34,"div",21)(35,"label",24),t._uU(36,"Tussenvoegsel en achternaam"),t.qZA(),t._UZ(37,"input",25),t.qZA(),t.TgZ(38,"div",26)(39,"label",27),t._uU(40,"Email"),t.qZA(),t._UZ(41,"input",28),t.qZA(),t.TgZ(42,"div",26)(43,"label",29),t._uU(44,"Straatnaam en huisnummer"),t.qZA(),t._UZ(45,"input",30),t.qZA(),t.TgZ(46,"div",26)(47,"label",31),t._uU(48,"Adresregel 2 "),t.TgZ(49,"span",32),t._uU(50,"(Optioneel)"),t.qZA()(),t._UZ(51,"input",33),t.qZA(),t.TgZ(52,"div",34)(53,"label",35),t._uU(54,"Postcode"),t.qZA(),t._UZ(55,"input",36),t.qZA(),t.TgZ(56,"div",34)(57,"label",37),t._uU(58,"Land"),t.qZA(),t.TgZ(59,"select",38)(60,"option",39),t._uU(61,"Kies..."),t.qZA(),t.TgZ(62,"option"),t._uU(63,"Nederland"),t.qZA()()()(),t.TgZ(64,"h4",18),t._uU(65,"Betaling"),t.qZA(),t.TgZ(66,"div",40)(67,"div",41),t._UZ(68,"input",42),t.TgZ(69,"label",43),t._uU(70,"Niet"),t.qZA()()(),t._UZ(71,"hr",44),t.TgZ(72,"button",45),t._uU(73," Betalen "),t.qZA()()()()()}if(2&n){const o=t.oxw();t.xp6(11),t.Oqu(o.amountOfItems),t.xp6(2),t.Q6J("ngForOf",o.cartItems),t.xp6(1),t.Q6J("ngIf",o.promoCode),t.xp6(5),t.hij("\u20ac ",o.totalPrice,""),t.xp6(1),t.Q6J("formGroup",o.promoCodeForm),t.xp6(3),t.Q6J("disabled",!o.promoCodeForm.valid),t.xp6(5),t.Q6J("formGroup",o.cartForm),t.xp6(44),t.Q6J("disabled",o.cartForm.valid)}}function N(n,e){1&n&&(t.TgZ(0,"main")(1,"h1"),t._uU(2,"Je moet ingelogd zijn om te kunnen bestellen"),t.qZA(),t.TgZ(3,"a",52),t._uU(4,"Login"),t.qZA()())}class g{constructor(e,o){this.http=e,this.toastService=o,this.loggedIn=!(!localStorage.getItem("userData")&&!sessionStorage.getItem("userData")),this.cartItems=JSON.parse(localStorage.getItem("cart")||"[]"),this.amountOfItems=this.cartItems.length,this.totalPrice=this.cartItems.reduce((s,l)=>s+l.price,0)}ngOnInit(){this.initForm()}initForm(){this.cartForm=new r.cw({firstName:new r.NI(null,r.kI.required),lastName:new r.NI(null,r.kI.required),email:new r.NI(null,[r.kI.required,r.kI.email,r.kI.pattern(/^(?=.{1,64}@)[A-Za-z0-9_-]+(\.[A-Za-z0-9_-]+)*@[^-][A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,})$/)]),address:new r.NI(null,r.kI.required),address2:new r.NI(null),zipCode:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Z]{4}\s[0-9]{2}$/)]),country:new r.NI(null,r.kI.required),paymentMethod:new r.NI(null,r.kI.required)}),this.promoCodeForm=new r.cw({promocode:new r.NI(null,r.kI.required)})}onSubmit(){this.http.post("/order/create",{total:this.totalPrice,items:this.cartItems,user:localStorage.getItem("user"),timestamp:Date.now()}).subscribe(e=>{this.toastService.show("Order placed",{classname:"bg-success text-light",delay:5e3}),localStorage.removeItem("cart"),this.cartItems=[],this.amountOfItems=0,this.totalPrice=0},e=>{this.toastService.show("Something went wrong",{classname:"bg-danger text-light",delay:5e3})})}onPromoCodeSubmit(){console.log(this.promoCodeForm.value),this.http.get("/promo/check",{params:this.promoCodeForm.value}).subscribe(e=>{this.toastService.show("Promo code applied",{classname:"bg-success text-light",delay:5e3}),this.promoCode=e,this.totalPrice=this.totalPrice*(1-this.promoCode.discount/100)},e=>{this.toastService.show("Promo code not valid",{classname:"bg-danger text-light",delay:5e3})})}removeItemFromCart(e){this.cartItems=this.cartItems.filter(o=>o.id!==e.id),this.amountOfItems=this.cartItems.length,localStorage.setItem("cart",JSON.stringify(this.cartItems)),this.totalPrice=this.cartItems.reduce((o,s)=>o+s.price,0)}}g.\u0275fac=function(e){return new(e||g)(t.Y36(I.eN),t.Y36(v.k))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-cart"]],decls:8,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"py-5","text-center"],["src","assets\\img\\LOGO_CN.png","alt","","width","72",1,"d-block","mx-auto","mb-4"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"badge","bg-primary","rounded-pill"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-sm",4,"ngFor","ngForOf"],["class","list-group-item d-flex justify-content-between bg-body-tertiary",4,"ngIf"],[1,"list-group-item","d-flex","justify-content-between"],[1,"card","p-2",3,"formGroup","submit"],[1,"input-group"],["type","text","placeholder","Promo code","formControlName","promocode",1,"form-control"],["type","submit",1,"btn","btn-secondary",3,"disabled"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","id","firstName","placeholder","","value","","required","","formControlName","firstName",1,"form-control"],["for","lastName",1,"form-label"],["type","text","id","lastName","placeholder","","value","","required","","formControlName","lastName",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],["type","email","id","email","placeholder","you@example.com","formControlName","email",1,"form-control"],["for","address",1,"form-label"],["type","text","id","address","placeholder","1234 Main St","required","","formControlName","address",1,"form-control"],["for","address2",1,"form-label"],[1,"text-body-secondary"],["type","text","id","address2","placeholder","Apartment or suite","formControlName","address2",1,"form-control"],[1,"col-md-6"],["for","zip",1,"form-label"],["type","text","id","zip","placeholder","","required","","formControlName","zipCode",1,"form-control"],["for","country",1,"form-label"],["id","country","required","","formControlName","country",1,"form-select"],["value",""],[1,"my-3"],[1,"form-check"],["id","credit","name","paymentMethod","type","radio","value","niet","checked","","required","","formControlName","paymentMethod",1,"form-check-input"],["for","credit",1,"form-check-label"],[1,"my-4"],["type","submit",1,"w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"list-group-item","d-flex","justify-content-between","lh-sm"],[1,"my-0"],[1,"text-body-secondary",2,"cursor","pointer",3,"click"],[1,"bi","bi-trash"],[1,"list-group-item","d-flex","justify-content-between","bg-body-tertiary"],[1,"text-success"],["routerLink","/login",1,"btn","btn-primary"]],template:function(e,o){1&e&&(t._UZ(0,"router-outlet")(1,"app-toasts")(2,"app-navigation")(3,"app-toasts"),t.TgZ(4,"div",0),t.YNc(5,q,74,8,"main",1),t.YNc(6,N,5,0,"main",1),t.qZA(),t._UZ(7,"app-footer")),2&e&&(t.xp6(5),t.Q6J("ngIf",o.loggedIn),t.xp6(1),t.Q6J("ngIf",!o.loggedIn))},dependencies:[a.lC,a.rH,C.y,f.sg,f.O5,b.J,x.c,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r._,r.JJ,r.JL,r.Q7,r.sg,r.u]});const w=[{path:"",children:[{path:"",component:d},{path:"cart",children:[{path:"",component:g}]},{path:":id",component:u}]}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[a.Bz.forChild(w),a.Bz]});class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[m,y.m]})}}]);