"use strict";(self.webpackChunkiQuestion=self.webpackChunkiQuestion||[]).push([[285],{6285:(N,c,n)=>{n.r(c),n.d(c,{SelfEditModule:()=>i});var g=n(3599),a=n(433),p=n(262),e=n(4650),f=n(7593),h=n(4310),v=n(529),S=n(3749),Z=n(6412),b=n(6895),y=n(9837),U=n(3719),T=n(970);class m{}function I(o,t){1&o&&e._UZ(0,"span",18)}function w(o,t){1&o&&(e.TgZ(0,"div"),e._UZ(1,"i",19),e._uU(2," Verander wachtwoord "),e.qZA())}function C(o,t){1&o&&e._UZ(0,"span",18)}function x(o,t){1&o&&(e.TgZ(0,"div"),e._UZ(1,"i",19),e._uU(2," Opslaan "),e.qZA())}m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-orders"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"orders works!"),e.qZA())}});class u{constructor(t,s,r,l){this.localUserService=t,this.toastService=s,this.http=r,this.errorHandlingService=l,this.user=this.localUserService.localUser,this.loading=!1,this.editSelfForm=new a.cw({name:new a.NI(this.user.user?.name,a.kI.required),email:new a.NI(this.user.user?.email,a.kI.required),organization:new a.NI(this.user.user?.organization,[a.kI.required])})}onSubmit(){const s={id:this.user.user?.id,name:this.editSelfForm.value.name,email:this.user.user?.email,organization:this.user.user?.organization,enabled:this.user.user?.enabled,role:this.user.user?.role},r="/user/"+this.user.user?.id;this.toastService.show("\u2699\ufe0f - Bezig met het bijwerken van je gegevens...",{classname:"bg-info text-light",delay:3e3}),this.loading=!0,this.http.post(r,s).pipe((0,p.K)(this.errorHandlingService.handleError)).subscribe({next:l=>{this.toastService.show("\u2705 - Je gegevens zijn succesvol bijgewerkt!",{classname:"bg-success text-light",delay:5e3}),this.localUserService.localUser.user=l;let d=JSON.parse(localStorage.getItem("userData")||sessionStorage.getItem("userData")||"{}");d={token:d.token,user:l},null!==localStorage.getItem("userData")?localStorage.setItem("userData",JSON.stringify(d)):null!==sessionStorage.getItem("userData")?sessionStorage.setItem("userData",JSON.stringify(d)):this.toastService.show("\u274c - Er is een fout opgetreden!",{classname:"bg-danger text-light",delay:5e3}),this.loading=!1},error:l=>{this.toastService.show("\u274c - "+l.error.message,{classname:"bg-danger text-light",delay:5e3}),this.loading=!1}})}onChangePassword(){const s=this.editSelfForm.value.email;this.toastService.show("\u2699\ufe0f - Bezig met het aanvragen van een nieuw wachtwoord...",{classname:"bg-info text-light",delay:3e3}),this.loading=!0,this.http.post("/auth/request-password-reset",{email:s}).pipe((0,p.K)(this.errorHandlingService.handleError)).subscribe({next:()=>{this.toastService.show("\u2705 - We hebben een e-mail gestuurd met je verficatie token!",{classname:"bg-success text-light",delay:5e3}),this.loading=!1},error:r=>{this.toastService.show("\u274c - "+r,{classname:"bg-danger text-light",delay:5e3}),this.loading=!1}})}}u.\u0275fac=function(t){return new(t||u)(e.Y36(f.D),e.Y36(h.k),e.Y36(v.eN),e.Y36(S.r))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-self-edit"]],decls:31,vars:6,consts:[[1,"container"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","userNameInput","formControlName","name",1,"form-control"],["for","floatingInput"],["disabled",""],["placement","top","ngbTooltip","Neem contact op met onze klantenservice om uw email aan te passen.","container","body",1,"form-floating","mb-3"],["type","text","id","userEmailInput","formControlName","email",1,"form-control"],["id","passwordResetButton",1,"btn","btn-primary","mb-3",3,"click"],["class","spinner-grow","role","status",4,"ngIf"],[4,"ngIf"],[1,"card","p-5"],[1,"text-xxl"],[1,"p-2","drop-shadow-md"],[1,"d-flex","justify-content-between","mt-2"],["type","button","routerLink","",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["role","status",1,"spinner-grow"],[1,"bi","bi-box-arrow-in-right"]],template:function(t,s){1&t&&(e._UZ(0,"app-navigation")(1,"app-toasts"),e.TgZ(2,"div",0)(3,"h1"),e._uU(4),e.qZA(),e.TgZ(5,"div",1)(6,"form",2),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(7,"div",3),e._UZ(8,"input",4),e.TgZ(9,"label",5),e._uU(10,"Naam"),e.qZA()(),e.TgZ(11,"fieldset",6)(12,"div",7),e._UZ(13,"input",8),e.TgZ(14,"label",5),e._uU(15,"Email address"),e.qZA()()(),e.TgZ(16,"a",9),e.NdJ("click",function(){return s.onChangePassword()}),e.YNc(17,I,1,0,"span",10),e.YNc(18,w,3,0,"div",11),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"div",12)(21,"h6",13),e._uU(22,"Bestellingen"),e.qZA(),e._UZ(23,"app-orders",14),e.qZA(),e.TgZ(24,"div",15)(25,"button",16),e._uU(26," Annuleren "),e.qZA(),e.TgZ(27,"button",17),e.YNc(28,C,1,0,"span",10),e.YNc(29,x,3,0,"div",11),e.qZA()()()()(),e._UZ(30,"app-footer")),2&t&&(e.xp6(4),e.hij("",null==s.user.user?null:s.user.user.name," aanpassen"),e.xp6(2),e.Q6J("formGroup",s.editSelfForm),e.xp6(11),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",!s.loading),e.xp6(10),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",!s.loading))},dependencies:[g.rH,Z.y,b.O5,y._L,U.J,T.c,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,m],encapsulation:2});var E=n(4466);class i{}i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild([{path:"",component:u}]),E.m]})}}]);